parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Tp2M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCell=r;var e=require("./Board");function r(r,t){var i=t%e.BOARD_SIZE,n=Math.floor(t/e.BOARD_SIZE);return r.x=i,r.y=n,r.wasMerged=!1,r.isEmpty=function(){return null===this.linkCard},r.canMergeWith=function(e){return!this.isEmpty()&&!e.isEmpty()&&this.linkCard.weight===e.linkCard.weight&&!this.wasMerged},r.mergeWith=function(e){var t=this.linkCard;r.wasMerged=!0,t.setWeight(2*t.weight),e.linkCard.setXY(t.x,t.y),e.linkCard.remove(),e.resetLinkedCard(),t.playAnimation("cardMerge")},r.resetLinkedCard=function(){this.linkCard=null},r.resetLinkedCard(),r}
},{"./Board":"a8e2"}],"jtc8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCard=e;var t=300;function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math.random()<.1?4:2,i=document.createElement("div");return i.setXY=function(t,e){this.x=t,this.y=e,this.style.setProperty("--x",t),this.style.setProperty("--y",e)},i.setWeight=function(t){this.weight=t,i.className="",i.classList.add("card","card--".concat(t)),i.textContent=t},i.remove=function(){this.parentNode.removeChild(this)},i.playAnimation=function(e){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;this.style.animation="".concat(e," ").concat(n,"ms"),setTimeout(function(){i.style.animation=""},n)},i.setWeight(e),i.playAnimation("cardCreation"),i}
},{}],"a8e2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Board=exports.BOARD_SIZE=void 0;var e=require("./Cell"),t=require("./Card");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=a(e))){var t=0,r=function(){};return{s:r,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}function o(e){return l(e)||u(e)||a(e)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function u(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function l(e){if(Array.isArray(e))return f(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function p(e){var t=m();return function(){var r,n=x(e);if(t){var o=x(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){var t="function"==typeof Map?new Map:void 0;return(g=function(e){if(null===e||!w(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return b(e,arguments,x(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),C(r,e)})(e)}function b(e,t,r){return(b=m()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&C(o,r.prototype),o}).apply(null,arguments)}function m(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function w(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=4;exports.BOARD_SIZE=E;var k=2048,O=function(r){h(a,g(Array));var i=p(a);function a(e,t){var r;return c(this,a),(r=i.call(this)).boardElement=e,r.scoreCounter=t,r.fillBoardThis=r.fillBoard.bind(v(r)),document.addEventListener("DOMContentLoaded",r.fillBoardThis),r}return y(a,[{key:"fillBoard",value:function(){for(var t=document.querySelectorAll(".cell"),r=0;r<t.length;r++){var n=(0,e.createCell)(t[r],r);this.push(n)}}},{key:"resetLinkedCards",value:function(){this.forEach(function(e){e.resetLinkedCard()})}},{key:"getRandomEmptyCell",value:function(){var e=this.filter(function(e){return e.isEmpty()});if(0!==e.length)return e[Math.floor(Math.random()*e.length)]}},{key:"clear",value:function(){var e=this;this.resetLinkedCards(),o(this.boardElement.childNodes).filter(function(e){return e.classList&&e.classList.contains("card")}).forEach(function(t){e.boardElement.removeChild(t)})}},{key:"spawnCard",value:function(){var e=this.getRandomEmptyCell();if(void 0!==e){var r=(0,t.createCard)();r.setXY(e.x,e.y),e.linkCard=r,this.boardElement.appendChild(r)}}},{key:"firstSpawn",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=0;t<e;t++)this.spawnCard()}},{key:"getGroupForCell",value:function(e,t){if("Up"===t||"Down"===t)return this.filter(function(t){return e.x===t.x}).sort(function(e,t){return e.y-t.y});if("Left"===t||"Right"===t)return this.filter(function(t){return e.y===t.y}).sort(function(e,t){return e.x-t.x});throw new Error("Error, in shift method you can useonly this value: Up, Down, Right, Left")}},{key:"getCellForMerge",value:function(e,t){var r=this.getGroupForCell(e,t),n=r.findIndex(function(t){return t.y===e.y&&t.x===e.x});switch(t){case"Up":for(var o=n-1;o>=0;o--){var i=r[o];if(!i.isEmpty()){if(i.canMergeWith(e))return i;break}}break;case"Down":for(var a=n+1;a<r.length;a++){var u=r[a];if(!u.isEmpty()){if(u.canMergeWith(e))return u;break}}break;case"Left":for(var l=n-1;l>=0;l--){var f=r[l];if(!f.isEmpty()){if(f.canMergeWith(e))return f;break}}break;case"Right":for(var c=n+1;c<r.length;c++){var s=r[c];if(!s.isEmpty()){if(s.canMergeWith(e))return s;break}}break;default:throw new Error("Error, in shift method you can useonly this value: Up, Down, Right, Left")}return null}},{key:"isCellOnPath",value:function(e,t,r){if(!e.isEmpty())return!1;switch(r){case"Up":return e.x===t.x&&e.y<t.y;case"Down":return e.x===t.x&&e.y>t.y;case"Left":return e.y===t.y&&e.x<t.x;case"Right":return e.y===t.y&&e.x>t.x;default:throw new Error("Error, in shift method you can useonly this value: Up, Down, Right, Left")}}},{key:"getCellForMove",value:function(e,t){var r,o={x:e.x,y:e.y},i=null,a=n(this);try{for(a.s();!(r=a.n()).done;){var u=r.value;this.isCellOnPath(u,o,t)&&(i=u,o={x:u.x,y:u.y})}}catch(l){a.e(l)}finally{a.f()}return i}},{key:"getCellsInOrder",value:function(e){var t=o(this);switch(e){case"Up":return t;case"Down":return t.reverse();case"Left":return t.sort(function(e,t){return e.y-t.y||e.x-t.x});case"Right":return t.sort(function(e,t){return e.y-t.y||t.x-e.x});default:throw new Error("Error,in getCellsInOrder method you can useonly this value: Up, Down, Right, Left")}}},{key:"getTargetCell",value:function(e,t){return this.getCellForMerge(e,t)||this.getCellForMove(e,t)}},{key:"swipe",value:function(e){var t,r=!1,o=0,i=n(this.getCellsInOrder(e).filter(function(e){return!e.isEmpty()}));try{for(i.s();!(t=i.n()).done;){var a=t.value,u=this.getTargetCell(a,e);if(null!==u)if(r=!0,u.canMergeWith(a)){if(u.mergeWith(a),o+=u.linkCard.weight,u.linkCard.weight>=k)return"Win"}else{var l=a.linkCard;l.setXY(u.x,u.y),u.linkCard=l,a.resetLinkedCard()}}}catch(f){i.e(f)}finally{i.f()}return this.forEach(function(e){e.wasMerged=!1}),o>0&&this.scoreCounter.add(o),r&&this.spawnCard(),this.continueGame()}},{key:"haveTargetCell",value:function(e){return!!this.getTargetCell(e,"Up")||(!!this.getTargetCell(e,"Down")||(!!this.getTargetCell(e,"Right")||!!this.getTargetCell(e,"Left")))}},{key:"continueGame",value:function(){if(void 0!==this.getRandomEmptyCell())return"continue";var e,t=n(this);try{for(t.s();!(e=t.n()).done;){var r=e.value;if(this.haveTargetCell(r))return"continue"}}catch(o){t.e(o)}finally{t.f()}return"Lose"}}]),a}();exports.Board=O;
},{"./Cell":"Tp2M","./Card":"jtc8"}],"gjIp":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,s,n){return s&&e(t.prototype,s),n&&e(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.StartButton=void 0;var n=function(){function e(s,n,i){t(this,e),this.HTMLelement=s,this.isRestart=!1,this.setupEventListener(n,i)}return s(e,[{key:"setupEventListener",value:function(t,e){var s=this;this.HTMLelement.addEventListener("click",function(){s.isRestart?t():e()})}},{key:"toggle",value:function(){this.isRestart?(this.HTMLelement.classList.remove("tile--button--restart"),this.HTMLelement.classList.add("tile--button--start"),this.HTMLelement.textContent="Start"):(this.HTMLelement.classList.remove("tile--button--start"),this.HTMLelement.classList.add("tile--button--restart"),this.HTMLelement.textContent="Restart"),this.isRestart=!this.isRestart}}]),e}();exports.StartButton=n;
},{}],"Qc3h":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScoreCounter=void 0;var n=function(){function t(o,n){e(this,t),this.HTMLelement=o,this.recordElement=n,this.counter=0,this.record=localStorage.getItem("scoreRecord")||0,this.updateHTML()}return o(t,[{key:"updateHTML",value:function(){this.HTMLelement.textContent=this.counter,this.recordElement.textContent=this.record}},{key:"playAddScoreAnimation",value:function(e){var t=this;this.HTMLelement.style.setProperty("--amount","'+".concat(e,"'")),this.HTMLelement.classList.add("game-score--before"),setTimeout(function(){t.HTMLelement.classList.remove("game-score--before")},500)}},{key:"add",value:function(e){this.counter+=e,this.playAddScoreAnimation(e),this.updateHTML()}},{key:"reset",value:function(){this.counter=0,this.updateHTML()}},{key:"updateRecord",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.counter;this.record=e,localStorage.setItem("scoreRecord",e)}}]),t}();exports.ScoreCounter=n;
},{}],"Bpae":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Advertisement=void 0;var r=function(){function t(n){e(this,t),this.HTMLelement=n,this.setGameInfo()}return n(t,[{key:"setGameInfo",value:function(){this.HTMLelement.textContent='Press "Start" to start game'}},{key:"setAd",value:function(){this.HTMLelement.textContent="Your ad can be here"}}]),t}();exports.Advertisement=r;
},{}],"CTkO":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function s(e,s,o){return s&&t(e.prototype,s),o&&t(e,o),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Message=void 0;var o=function(){function t(s,o,n,a){e(this,t),this.messageElement=s,this.scoreCounter=o,this.startGame=n,this.stopGame=a,this.className=this.messageElement.className,this.messageTextNode=document.querySelector(".".concat(this.className,"__text")),this.recordNode=document.querySelector(".".concat(this.className,"__record-val")),this.counterNode=document.querySelector(".".concat(this.className,"__score-val")),this.closeButton=document.querySelector(".".concat(this.className,"__close")),this.tryAgainButton=document.querySelector(".".concat(this.className,"__try-again")),this.closeMessageHandler=this.closeMessage.bind(this),this.closeAndRestartHandler=this.closeAndRestart.bind(this)}return s(t,[{key:"showMessage",value:function(e){var t=e?"Winner! Congrats! You did it!":"You lose! Restart the game?";this.messageElement.classList.add("show"),this.messageTextNode.textContent=t,this.recordNode.textContent=this.scoreCounter.record,this.counterNode.textContent=this.scoreCounter.counter,this.tryAgainButton.addEventListener("click",this.closeAndRestartHandler),this.closeButton.addEventListener("click",this.closeMessageHandler)}},{key:"closeAndRestart",value:function(){this.closeMessage(),this.stopGame(),this.startGame()}},{key:"closeMessage",value:function(){this.messageElement.classList.remove("show"),this.tryAgainButton.removeEventListener("click",this.closeMessageHandler),this.closeButton.removeEventListener("click",this.closeMessageHandler)}}]),t}();exports.Message=o;
},{}],"vCXA":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function n(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventHandler=void 0;var a=function(){function t(n,a){e(this,t),this.board=n,this.gameOver=a,this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.keyDownHandler=this.keyDownHandler.bind(this)}return n(t,[{key:"handleTouchStart",value:function(){event.preventDefault(),this.startX=event.changedTouches[0].screenX,this.startY=event.changedTouches[0].screenY}},{key:"handleTouchEnd",value:function(){event.preventDefault();var e=event.changedTouches[0].screenX,t=event.changedTouches[0].screenY;this.swipeHandler(e-this.startX,t-this.startY)}},{key:"handleTouchMove",value:function(){event.preventDefault()}},{key:"keyDownHandler",value:function(){var e=0,t=0;switch(event.key){case"ArrowUp":t=-1;break;case"ArrowDown":t=1;break;case"ArrowLeft":e=-1;break;case"ArrowRight":e=1;break;default:return}this.swipeHandler(e,t)}},{key:"swipeHandler",value:function(e,t){var n,a=this.board.swipe.bind(this.board);"Win"===(n=Math.abs(e)>Math.abs(t)?a(e>0?"Right":"Left"):a(t>0?"Down":"Up"))&&this.gameOver(!0),"Lose"===n&&this.gameOver(!1)}},{key:"start",value:function(){document.addEventListener("keydown",this.keyDownHandler),this.board.boardElement.addEventListener("touchstart",this.handleTouchStart,!1),this.board.boardElement.addEventListener("touchend",this.handleTouchEnd,!1),this.board.boardElement.addEventListener("touchmove",this.handleTouchMove,!1)}},{key:"stop",value:function(){document.removeEventListener("keydown",this.keyDownHandler),this.board.boardElement.removeEventListener("touchstart",this.handleTouchStart),this.board.boardElement.removeEventListener("touchend",this.handleTouchEnd),this.board.boardElement.removeEventListener("touchend",this.handleTouchMove)}}]),t}();exports.EventHandler=a;
},{}],"KIzB":[function(require,module,exports) {
"use strict";var e=require("./classes/Board.js"),r=require("./classes/StartButton.js"),t=require("./classes/ScoreCounter.js"),s=require("./classes/Advertisement.js"),o=require("./classes/Message.js"),n=require("./classes/EventHandler.js"),c=document.querySelector(".advertisement"),u=document.querySelector(".game-score"),a=document.querySelector(".record-score"),d=document.querySelector(".message"),l=document.querySelector(".tile--button"),i=document.querySelector(".board"),m=new r.StartButton(l,y,v),q=new t.ScoreCounter(u,a),S=new o.Message(d,q,v,y),g=new e.Board(i,q),w=new n.EventHandler(g,f),j=new s.Advertisement(c);function v(){j.setAd(),g.resetLinkedCards(),g.firstSpawn(2),m.toggle(),w.start()}function y(){j.setGameInfo(),q.reset(),g.clear(),m.toggle(),w.stop()}function f(e){q.counter>q.record&&q.updateRecord(),q.updateHTML(),S.showMessage(e)}
},{"./classes/Board.js":"a8e2","./classes/StartButton.js":"gjIp","./classes/ScoreCounter.js":"Qc3h","./classes/Advertisement.js":"Bpae","./classes/Message.js":"CTkO","./classes/EventHandler.js":"vCXA"}]},{},["KIzB"], null)
//# sourceMappingURL=main.27180f14.js.map